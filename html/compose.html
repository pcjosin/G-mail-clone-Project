<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compose Mail</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap"
      rel="stylesheet"
    />


    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/compose.css">
    <script src="./script/compose.js"></script>

    <script
      async
      src="https://apis.google.com/js/api.js"
      onload="gapiLoaded()"></script>
    <script async src="https://accounts.google.com/gsi/client"></script>
</head>

<body>
    <div id="outer-compose-container">

        <div id="to-area">
            <input type="email" placeholder="Receipents" id="email-container" onselect="emailSelected()">
        </div>
        <div id="subject-area">
            <input type="text" placeholder="Subject" id="subject-container">
        </div>
        <div  id="message-container"  onkeydown="handleKeyPress(event)" contenteditable="true">


        </div>
        <div id="send-button-row">
            <button type="button" class="btn btn-primary send-button" onclick="sendEmail()">Send</button>
        </div>
    </div>
    <script>
    // JavaScript to handle the editable div
    var editableDiv = document.getElementById("message-container");

    // Set initial content
    editableDiv.innerHTML = "Type text here...";

    // Add focus and blur events for styling
    editableDiv.addEventListener("focus", function() {
        editableDiv.style.border = "1px solid #007BFF";
    });

    editableDiv.addEventListener("blur", function() {
        editableDiv.style.border = "1px solid #ccc";
    });

    // Add input event for capturing text changes
    editableDiv.addEventListener("input", function() {
        // Access the text content
        var textContent = editableDiv.innerText;
        console.log("Text content:", textContent);
    });

    function handleKeyPress(event) {
        // Check if the pressed key is Enter (keyCode 13) and not Shift + Enter
        if (event.keyCode === 13 && !event.shiftKey) {
            // Prevent the default behavior (inserting a new line)
            event.preventDefault();

            // Insert a line break (<br>) at the current caret position
            document.execCommand('insertHTML', false, '<br>');
        }
    }

</script>
</body>

</html>